// Code generated by private/model/cli/gen-api/main.go. DO NOT EDIT.

package cloudwatchlogs

import (
	"context"

	"github.com/aws/aws-sdk-go-v2/aws"
	"github.com/aws/aws-sdk-go-v2/service/cloudwatchlogs/types"
)

const opCreateExportTask = "CreateExportTask"

// CreateExportTaskRequest returns a request value for making API operation for
// Amazon CloudWatch Logs.
//
// Creates an export task, which allows you to efficiently export data from
// a log group to an Amazon S3 bucket.
//
// This is an asynchronous call. If all the required information is provided,
// this operation initiates an export task and responds with the ID of the task.
// After the task has started, you can use DescribeExportTasks to get the status
// of the export task. Each account can only have one active (RUNNING or PENDING)
// export task at a time. To cancel an export task, use CancelExportTask.
//
// You can export logs from multiple log groups or multiple time ranges to the
// same S3 bucket. To separate out log data for each export task, you can specify
// a prefix to be used as the Amazon S3 key prefix for all exported objects.
//
// Exporting to S3 buckets that are encrypted with AES-256 is supported. Exporting
// to S3 buckets encrypted with SSE-KMS is not supported.
//
//    // Example sending a request using CreateExportTaskRequest.
//    req := client.CreateExportTaskRequest(params)
//    resp, err := req.Send(context.TODO())
//    if err == nil {
//        fmt.Println(resp)
//    }
//
// Please also see https://docs.aws.amazon.com/goto/WebAPI/logs-2014-03-28/CreateExportTask
func (c *Client) CreateExportTaskRequest(input *types.CreateExportTaskInput) CreateExportTaskRequest {
	op := &aws.Operation{
		Name:       opCreateExportTask,
		HTTPMethod: "POST",
		HTTPPath:   "/",
	}

	if input == nil {
		input = &types.CreateExportTaskInput{}
	}

	req := c.newRequest(op, input, &types.CreateExportTaskOutput{})
	return CreateExportTaskRequest{Request: req, Input: input, Copy: c.CreateExportTaskRequest}
}

// CreateExportTaskRequest is the request type for the
// CreateExportTask API operation.
type CreateExportTaskRequest struct {
	*aws.Request
	Input *types.CreateExportTaskInput
	Copy  func(*types.CreateExportTaskInput) CreateExportTaskRequest
}

// Send marshals and sends the CreateExportTask API request.
func (r CreateExportTaskRequest) Send(ctx context.Context) (*CreateExportTaskResponse, error) {
	r.Request.SetContext(ctx)
	err := r.Request.Send()
	if err != nil {
		return nil, err
	}

	resp := &CreateExportTaskResponse{
		CreateExportTaskOutput: r.Request.Data.(*types.CreateExportTaskOutput),
		response:               &aws.Response{Request: r.Request},
	}

	return resp, nil
}

// CreateExportTaskResponse is the response type for the
// CreateExportTask API operation.
type CreateExportTaskResponse struct {
	*types.CreateExportTaskOutput

	response *aws.Response
}

// SDKResponseMetdata returns the response metadata for the
// CreateExportTask request.
func (r *CreateExportTaskResponse) SDKResponseMetdata() *aws.Response {
	return r.response
}
