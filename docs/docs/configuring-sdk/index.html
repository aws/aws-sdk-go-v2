<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.79.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/index.xml">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/aws-sdk-go-v2/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-192x192.png" sizes="192x192">

<title>Configuring the AWS SDK for Go V2 | AWS SDK for Go V2</title><meta property="og:title" content="Configuring the AWS SDK for Go V2" />
<meta property="og:description" content="The AWS SDK for Go V2 provides APIs and utilities that developers can use to build Go applications that use AWS services." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/" />
<meta property="og:site_name" content="AWS SDK for Go V2" />
<meta itemprop="name" content="Configuring the AWS SDK for Go V2">
<meta itemprop="description" content="The AWS SDK for Go V2 provides APIs and utilities that developers can use to build Go applications that use AWS services.">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Configuring the AWS SDK for Go V2"/>
<meta name="twitter:description" content="The AWS SDK for Go V2 provides APIs and utilities that developers can use to build Go applications that use AWS services."/>





<link rel="preload" href="/aws-sdk-go-v2/scss/main.min.a40e8388f84bdd24bc3411e01a2a4a50b09036c9b079bd05a1eb025839f53861.css" as="style">
<link href="/aws-sdk-go-v2/scss/main.min.a40e8388f84bdd24bc3411e01a2a4a50b09036c9b079bd05a1eb025839f53861.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/aws-sdk-go-v2/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">AWS SDK for Go V2</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/aws-sdk-go-v2/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2" target="_blank" ><span>API</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://github.com/aws/aws-sdk-go-v2" target="_blank" ><span>GitHub</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/aws-sdk-go-v2/offline-search-index.c5574c27dfa6a260860207d71b08d554.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/aws-sdk-go-v2/offline-search-index.c5574c27dfa6a260860207d71b08d554.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="aws-sdk-go-v2docs">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsgetting-started" href="/aws-sdk-go-v2/docs/getting-started/">Getting Started</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/configuring-sdk/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Configuring the SDK</a>
  </li>
  <ul>
    <li class="collapse show" id="aws-sdk-go-v2docsconfiguring-sdk">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsconfiguring-sdkendpoints" href="/aws-sdk-go-v2/docs/configuring-sdk/endpoints/">Endpoints</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsconfiguring-sdkcustom-http" href="/aws-sdk-go-v2/docs/configuring-sdk/custom-http/">HTTP Client</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsconfiguring-sdklogging" href="/aws-sdk-go-v2/docs/configuring-sdk/logging/">Logging</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docshandling-errors" href="/aws-sdk-go-v2/docs/handling-errors/">Handling Errors</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/sdk-utilities/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SDK Utilities</a>
  </li>
  <ul>
    <li class="collapse " id="aws-sdk-go-v2docssdk-utilities">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssdk-utilitiescloudfront" href="/aws-sdk-go-v2/docs/sdk-utilities/cloudfront/">Amazon CloudFront</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssdk-utilitiesec2-imds" href="/aws-sdk-go-v2/docs/sdk-utilities/ec2-imds/">Amazon EC2 IMDS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssdk-utilitiess3" href="/aws-sdk-go-v2/docs/sdk-utilities/s3/">Amazon S3</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsmaking-requests" href="/aws-sdk-go-v2/docs/making-requests/">Using AWS Services</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docscloud9-go" href="/aws-sdk-go-v2/docs/cloud9-go/">Using Cloud9 with the SDK</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/security/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Security</a>
  </li>
  <ul>
    <li class="collapse " id="aws-sdk-go-v2docssecurity">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritycompliance-validation" href="/aws-sdk-go-v2/docs/security/compliance-validation/">Compliance Validation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecurityiam" href="/aws-sdk-go-v2/docs/security/iam/">Identity and Access Management</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecurityinfrastructure-security" href="/aws-sdk-go-v2/docs/security/infrastructure-security/">Infrastructure Security</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritydisaster-recovery-resiliency" href="/aws-sdk-go-v2/docs/security/disaster-recovery-resiliency/">Resilience</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritydata-protection" href="/aws-sdk-go-v2/docs/security/data-protection/">Data Protection</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritytls" href="/aws-sdk-go-v2/docs/security/tls/">Enforcing TLS 1.2</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsmiddleware" href="/aws-sdk-go-v2/docs/middleware/">Middleware</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/migrating/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Migrating</a>
  </li>
  <ul>
    <li class="collapse " id="aws-sdk-go-v2docsmigrating">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











<a href="https://github.com/aws/aws-sdk-go-v2/edit/documentation/content/en/docs/configuring-sdk/_index.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/aws/aws-sdk-go-v2/new/documentation/content/en/docs/configuring-sdk/_index.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" target="_blank"><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/aws/aws-sdk-go-v2/issues/new?title=Configuring%20the%20AWS%20SDK%20for%20Go%20V2" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/aws/aws-sdk-go-v2/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#loading-aws-shared-configuration">Loading AWS Shared Configuration</a></li>
    <li><a href="#specifying-the-aws-region">Specifying the AWS Region</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#specifying-credentials">Specifying Credentials</a>
      <ul>
        <li><a href="#iam-roles-for-tasks">IAM Roles for Tasks</a></li>
        <li><a href="#iam-roles-for-amazon-ec2-instances">IAM Roles for Amazon EC2 Instances</a></li>
        <li><a href="#shared-credentials-file">Shared Credentials File</a></li>
        <li><a href="#environment-variables">Environment Variables</a></li>
        <li><a href="#specify-credentials-programmatically">Specify Credentials Programmatically</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="https://aws.github.io/aws-sdk-go-v2/docs/">Documentation</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/">Configuring the SDK</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Configuring the AWS SDK for Go V2</h1>
        
	
	<p>In the AWS SDK for Go V2, you can configure common settings for service clients, such as the logger, log level, and
retry configuration. Most settings are optional. However, for each service client, you must specify an AWS Region and
your credentials. The SDK uses these values to send requests to the correct Region and sign requests with the correct
credentials. You can specify these values as programmatically in code, or via the execution environment.</p>
<h2 id="loading-aws-shared-configuration">Loading AWS Shared Configuration</h2>
<p>There are a number of ways to initialize a service API client, but the following is the most common pattern recommended
to users.</p>
<p>To configure the SDK to use the AWS shared configuration use the following code:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
  <span style="color:#4e9a06">&#34;log&#34;</span>
  <span style="color:#4e9a06">&#34;github.com/aws/aws-sdk-go-v2/config&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#8f5902;font-style:italic">// ...
</span><span style="color:#8f5902;font-style:italic"></span>
<span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadDefaultConfig</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fatalf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;failed to load configuration, %v&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p><code>config.LoadDefaultConfig()</code> will construct an <a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/aws#Config">aws.Config</a>
using the AWS shared configuration sources. This includes configuring a credential provider. configuring the AWS Region,
and loading service specific configuration. Service clients can be constructed using the loaded <code>aws.Config</code>, providing
a consistent pattern for constructing clients.</p>
<p>For more information about AWS Shared Configuration see the
<a href="https://docs.aws.amazon.com/credref/latest/refdocs/overview.html">AWS Tools and SDKs Shared Configuration and Credentials Reference Guide </a></p>
<h2 id="specifying-the-aws-region">Specifying the AWS Region</h2>
<p>When you specify the Region, you specify where to send requests, such as us-west-2 or us-east-2. For a list of Regions
for each service, see Regions and Endpoints in the Amazon Web Services General Reference.</p>
<p>The SDK does not have a default Region. To specify a Region:</p>
<ul>
<li>
<p>Set the <code>AWS_REGION</code> environment variable to the default Region</p>
</li>
<li>
<p>Set the region explicitly
using <a href="https://github.com/aws/aws-sdk-go-v2/blob/config/v0.2.2/config/provider.go#L127">config.WithRegion</a>
as an argument to <code>config.LoadDefaultConfig</code> when loading configuration.</p>
</li>
</ul>
<p>If you set a Region using all of these techniques, the SDK uses the Region you explicitly specified.</p>
<h5 id="configure-region-with-environment-variable">Configure Region with Environment Variable</h5>
<h6 id="linux-macos-or-unix">Linux, macOS, or Unix</h6>
<pre><code>export AWS_REGION=us-west-2
</code></pre><h6 id="windows">Windows</h6>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-batchfile" data-lang="batchfile"><span style="color:#204a87;font-weight:bold">set</span> <span style="color:#000">AWS_REGION</span><span style="color:#000;font-weight:bold">=</span>us-west-2
</code></pre></div><h5 id="specify-region-programmatically">Specify Region Programmatically</h5>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadDefaultConfig</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">WithRegion</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;us-west-2&#34;</span><span style="color:#000;font-weight:bold">))</span>
</code></pre></div><h2 id="specifying-credentials">Specifying Credentials</h2>
<p>The AWS SDK for Go V2 requires credentials (an access key and secret access
key) to sign requests to AWS. You can specify your credentials in
several locations, depending on your particular use case. For
information about obtaining credentials, see <a href="/aws-sdk-go-v2/docs/getting-started/">Getting Started</a>.</p>
<p>When you initialize an <code>aws.Config</code> instance using <code>config.LoadDefaultConfig</code>,
the SDK uses its default credential chain to find AWS credentials. This
default credential chain looks for credentials in the following order:</p>
<ol>
<li>Environment variables.
<ol>
<li>Static Credentials (<code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>, <code>AWS_SESSION_TOKEN</code>)</li>
<li>Web Identity Token (<code>AWS_WEB_IDENTITY_TOKEN_FILE</code>)</li>
</ol>
</li>
<li>Shared credentials file.
<ol>
<li>~/.aws/credentials</li>
<li>~/.aws/config</li>
</ol>
</li>
<li>If your application uses an ECS task definition or RunTask API operation,
IAM role for tasks.</li>
<li>If your application is running on an Amazon EC2 instance, IAM role for Amazon EC2.</li>
</ol>
<p>The SDK detects and uses the built-in providers automatically, without
requiring manual configurations. For example, if you use IAM roles for
Amazon EC2 instances, your applications automatically use the
instance&rsquo;s credentials. You don&rsquo;t need to manually configure credentials
in your application.</p>
<p>As a best practice, AWS recommends that you specify credentials in the
following order:</p>
<ol>
<li>
<p>Use IAM roles for tasks if your application uses an ECS task definition or RunTask API operation.</p>
</li>
<li>
<p>Use IAM roles for Amazon EC2 (if your application is running on an
Amazon EC2 instance).</p>
<p>IAM roles provide applications on the instance temporary security
credentials to make AWS calls. IAM roles provide an easy way to
distribute and manage credentials on multiple Amazon EC2 instances.</p>
</li>
<li>
<p>Use a shared credentials file.</p>
<p>This credentials file is the same one used by other SDKs and the .
If you&rsquo;re already using a shared credentials file, you can also use
it for this purpose.</p>
</li>
<li>
<p>Use environment variables.</p>
<p>Setting environment variables is useful if you&rsquo;re doing development
work on a machine other than an Amazon EC2 instance.</p>
</li>
</ol>
<h3 id="iam-roles-for-tasks">IAM Roles for Tasks</h3>
<p>If your application uses an Amazon ECS task definition or <code>RunTask</code> operation,
use <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html">IAM Roles for Tasks</a>
to specify an IAM role that can be used by the containers in a task.</p>
<h3 id="iam-roles-for-amazon-ec2-instances">IAM Roles for Amazon EC2 Instances</h3>
<p>If you are running your application on an Amazon EC2 instance,
use the instance&rsquo;s <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">IAM role</a>
to get temporary security credentials to make calls to AWS.</p>
<p>If you have configured your instance to use IAM roles, the SDK uses
these credentials for your application automatically. You don&rsquo;t need to
manually specify these credentials.</p>
<h3 id="shared-credentials-file">Shared Credentials File</h3>
<p>A credential file is a plaintext file that contains your access keys.
The file must be on the same machine on which you&rsquo;re running your
application. The file must be named <code>credentials</code> and located in the
<code>.aws/</code> folder in your home directory. The home directory can vary by
operating system. In Windows, you can refer to your home directory by
using the environment variable :code:<code>%UserProfile%</code>. In Unix-like systems, you
can use the environment variable :code:<code>$HOME</code> or :code:<code>~</code> (tilde).</p>
<p>If you already use this file for other SDKs and tools (like the ),
you don&rsquo;t need to change anything to use the files in this SDK. If
you use different credentials for different tools or applications, you
can use <em>profiles</em> to configure multiple access keys in the same
configuration file.</p>
<h4 id="creating-the-credentials-file">Creating the Credentials File</h4>
<p>If you don&rsquo;t have a shared credentials file (<code>.aws/credentials</code>), you
can use any text editor to create one in your home directory. Add the
following content to your credentials file, replacing
<code>&lt;YOUR_ACCESS_KEY_ID&gt;</code> and <code>&lt;YOUR_SECRET_ACCESS_KEY&gt;</code> with your
credentials.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#204a87;font-weight:bold">[default]</span>
<span style="color:#c4a000">aws_access_key_id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_ACCESS_KEY_ID&gt;</span>
<span style="color:#c4a000">aws_secret_access_key</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_SECRET_ACCESS_KEY&gt;</span>
</code></pre></div><p>The <code>[default]</code> heading defines credentials for the default profile,
which the SDK will use unless you configure it to use another profile.</p>
<p>You can also use temporary security credentials by adding the session
tokens to your profile, as shown in the following example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#204a87;font-weight:bold">[temp]</span>
<span style="color:#c4a000">aws_access_key_id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_TEMP_ACCESS_KEY_ID&gt;</span>
<span style="color:#c4a000">aws_secret_access_key</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_TEMP_SECRET_ACCESS_KEY&gt;</span>
<span style="color:#c4a000">aws_session_token</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_SESSION_TOKEN&gt;</span>
</code></pre></div><h4 id="specifying-profiles">Specifying Profiles</h4>
<p>You can include multiple access keys in the same configuration file by
associating each set of access keys with a profile. For example, in your
credentials file, you can declare multiple profiles, as follows.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#204a87;font-weight:bold">[default]</span>
<span style="color:#c4a000">aws_access_key_id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_DEFAULT_ACCESS_KEY_ID&gt;</span>
<span style="color:#c4a000">aws_secret_access_key</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_DEFAULT_SECRET_ACCESS_KEY&gt;</span>

<span style="color:#204a87;font-weight:bold">[test-account]</span>
<span style="color:#c4a000">aws_access_key_id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_TEST_ACCESS_KEY_ID&gt;</span>
<span style="color:#c4a000">aws_secret_access_key</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_TEST_SECRET_ACCESS_KEY&gt;</span>

<span style="color:#204a87;font-weight:bold">[prod-account]</span>
<span style="color:#8f5902;font-style:italic">; work profile</span>
<span style="color:#c4a000">aws_access_key_id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_PROD_ACCESS_KEY_ID&gt;</span>
<span style="color:#c4a000">aws_secret_access_key</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&lt;YOUR_PROD_SECRET_ACCESS_KEY&gt;</span>
</code></pre></div><p>By default, the SDK checks the <code>AWS_PROFILE</code> environment variable to
determine which profile to use. If no <code>AWS_PROFILE</code> variable is set,
the SDK uses the default profile.</p>
<p>Sometimes, you may to want to use a different profile with your application.
For example let&rsquo;s say you want to use the <code>test-account</code> credentials with
your <code>myapp</code> application. You can your application and use this profile by using
the following command:</p>
<pre><code>$ AWS_PROFILE=test-account myapp
</code></pre><p>You can also use instruct the SDK to select a profile by either
<code>os.Setenv(&quot;AWS_PROFILE&quot;, &quot;test-account&quot;)</code> before calling <code>config.LoadDefaultConfig</code>,
or by passing an explicit profile as an argument as shown in the following example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadDefaultConfig</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">WithSharedConfigProfile</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;test-account&#34;</span><span style="color:#000;font-weight:bold">))</span>
</code></pre></div>

<div class="pageinfo pageinfo-info">
<p>If you specify credentials in environment variables, the SDK
always uses those credentials, no matter which profile you specify.</p>

</div>

<h3 id="environment-variables">Environment Variables</h3>
<p>By default, the SDK detects AWS credentials set in your environment and
uses them to sign requests to AWS. That way you don&rsquo;t need to manage
credentials in your applications.</p>
<p>The SDK looks for credentials in the following environment variables:</p>
<ul>
<li><code>AWS_ACCESS_KEY_ID</code></li>
<li><code>AWS_SECRET_ACCESS_KEY</code></li>
<li><code>AWS_SESSION_TOKEN</code> (optional)</li>
</ul>
<p>The following examples show how you configure the environment variables.</p>
<h4 id="linux-os-x-or-unix">Linux, OS X, or Unix</h4>
<pre><code>$ export AWS_ACCESS_KEY_ID=YOUR_AKID
$ export AWS_SECRET_ACCESS_KEY=YOUR_SECRET_KEY
$ export AWS_SESSION_TOKEN=TOKEN
</code></pre><h4 id="windows-1">Windows</h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-batch" data-lang="batch"><span style="color:#000;font-weight:bold">&gt;</span> set AWS_ACCESS_KEY_ID=YOUR_AKID
<span style="color:#000;font-weight:bold">&gt;</span> set AWS_SECRET_ACCESS_KEY=YOUR_SECRET_KEY
<span style="color:#000;font-weight:bold">&gt;</span> set AWS_SESSION_TOKEN=TOKEN
</code></pre></div><h3 id="specify-credentials-programmatically">Specify Credentials Programmatically</h3>
<p><code>config.LoadDefaultConfig</code> allows you to provide an explicit
<a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/aws#CredentialsProvider">aws.CredentialProvider</a> when loading the shared configuration sources.
To pass an explicity credential provider when loading shared configuration use
<a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/config#WithCredentialsProvider">config.WithCredentialsProvider</a>. For example, if <code>customProvider</code>
references an instance of <code>aws.CredentialProvider</code> implementation, it can be passed during configuration loading
like so:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadDefaultConfig</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">WithCredentialsProvider</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">customProvider</span><span style="color:#000;font-weight:bold">))</span>
</code></pre></div><p>If you explicitly provide credentials, as in this example, the SDK uses only those credentials.</p>


<div class="pageinfo pageinfo-info">
<p>All credential providers passed to or returned by <code>LoadDefaultConfig</code> are wrapped in a
<a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/aws#CredentialsCache">CredentialsCache</a> automatically. This enables caching and concurrency safe
credential access. If you explicitly configure a provider on <code>aws.Config</code> directly you must explicitly wrap the provider
with this type.</p>

</div>

<h4 id="static-credentials">Static Credentials</h4>
<p>You can hard-code credentials in your application by using the <a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/credentials#StaticCredentialsProvider">credentials.StaticCredentialsProvider</a>
credential provider to explicitly set the access keys to be used. For example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadDefaultConfig</span><span style="color:#000;font-weight:bold">(</span>
	<span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">WithCredentialsProvider</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">aws</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StaticCredentialsProvider</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;AKID&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;SECRET_KEY&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;TOKEN&#34;</span><span style="color:#000;font-weight:bold">)),</span>
<span style="color:#000;font-weight:bold">)</span>
</code></pre></div>

<div class="pageinfo pageinfo-warning">
<p>Do not embed credentials inside an application. Use this
method only for testing purposes.</p>

</div>

<h4 id="other-credentials-providers">Other Credentials Providers</h4>
<p>The SDK provides other methods for retrieving credentials in the
<a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/credentials">credentials</a> module. For example, you can retrieve temporary security credentials from AWS Security Token Service or credentials from encrypted storage.</p>
<p><strong>Available Credential Providers</strong>:</p>
<ul>
<li>
<p><a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/credentials/ec2rolecreds">ec2rolecreds</a> – Retrieve Credentials from Amazon EC2
Instances Roles via Amazon EC2 IMDS.</p>
</li>
<li>
<p><a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/credentials/endpointcreds">endpointcreds</a> – Retrieve Credentials from an arbitrary HTTP
endpoint.</p>
</li>
<li>
<p><a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/credentials/processcreds">processcreds</a> – Retrieve Credentials from an external process that
will be invoked by the host environment&rsquo;s shell.</p>
</li>
<li>
<p><a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/credentials/stscreds">stscreds</a> – Retrieve Credentials from AWS STS</p>
</li>
</ul>

        <div class="section-index">
    
    
    
    
    <hr class="panel-line">
        
            
        
            
        
            
        
            
        
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/aws-sdk-go-v2/docs/configuring-sdk/endpoints/">Configuring Client Endpoints</a>
                    </h5>
                    <p>Customizing service client endpoints.</p>
                </div>
            
        
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/aws-sdk-go-v2/docs/configuring-sdk/custom-http/">Customizing the HTTP Client</a>
                    </h5>
                    <p>Create a custom HTTP client with the AWS SDK for Go V2 to specify custom timeout values.</p>
                </div>
            
        
            
        
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/aws-sdk-go-v2/docs/configuring-sdk/logging/">Logging</a>
                    </h5>
                    <p>Using Logging facilities for debugging SDK requests.</p>
                </div>
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
</div>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified November 24, 2020: <a  href="https://github.com/aws/aws-sdk-go-v2/commit/653d2e220003e1a68dd2b8512fb12b5f7a9e447e">Developer: Guide Using AWS Services (#907) (653d2e2)</a>
</div>
</div>

          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Blog" aria-label="Blog">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/blogs/developer/category/developer-tools/aws-sdk-for-go/">
      <i class="fa fa-rss"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/aws/aws-sdk-go-v2">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 Amazon Web Services, Inc. or its affiliates. All rights reserved. All Rights Reserved</small>
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/aws-sdk-go-v2/js/main.min.460c8ae21829f9b330823a08f34ac961d7d0daa8874c8c9eba7ea0484bb42a79.js" integrity="sha256-RgyK4hgp&#43;bMwgjoI80rJYdfQ2qiHTIyeun6gSEu0Knk=" crossorigin="anonymous"></script>




  </body>
</html>