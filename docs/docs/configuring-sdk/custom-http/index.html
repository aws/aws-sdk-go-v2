<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.78.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/aws-sdk-go-v2/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/aws-sdk-go-v2/favicons/android-192x192.png" sizes="192x192">

<title>Customizing the HTTP Client | AWS SDK for Go V2</title><meta property="og:title" content="Customizing the HTTP Client" />
<meta property="og:description" content="Create a custom HTTP client with the AWS SDK for Go V2 to specify custom timeout values." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/custom-http/" />
<meta property="article:published_time" content="2020-11-12T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-11-24T14:58:20-08:00" /><meta property="og:site_name" content="AWS SDK for Go V2" />
<meta itemprop="name" content="Customizing the HTTP Client">
<meta itemprop="description" content="Create a custom HTTP client with the AWS SDK for Go V2 to specify custom timeout values.">
<meta itemprop="datePublished" content="2020-11-12T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-11-24T14:58:20-08:00" />
<meta itemprop="wordCount" content="833">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Customizing the HTTP Client"/>
<meta name="twitter:description" content="Create a custom HTTP client with the AWS SDK for Go V2 to specify custom timeout values."/>





<link rel="preload" href="/aws-sdk-go-v2/scss/main.min.a40e8388f84bdd24bc3411e01a2a4a50b09036c9b079bd05a1eb025839f53861.css" as="style">
<link href="/aws-sdk-go-v2/scss/main.min.a40e8388f84bdd24bc3411e01a2a4a50b09036c9b079bd05a1eb025839f53861.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/aws-sdk-go-v2/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">AWS SDK for Go V2</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/aws-sdk-go-v2/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2" target="_blank" ><span>API</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://github.com/aws/aws-sdk-go-v2" target="_blank" ><span>GitHub</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/aws-sdk-go-v2/offline-search-index.c4f65b5ca8db8903b35112598c16e5c1.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/aws-sdk-go-v2/offline-search-index.c4f65b5ca8db8903b35112598c16e5c1.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="aws-sdk-go-v2docs">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsgetting-started" href="/aws-sdk-go-v2/docs/getting-started/">Getting Started</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/configuring-sdk/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Configuring the SDK</a>
  </li>
  <ul>
    <li class="collapse show" id="aws-sdk-go-v2docsconfiguring-sdk">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsconfiguring-sdkendpoints" href="/aws-sdk-go-v2/docs/configuring-sdk/endpoints/">Endpoints</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-aws-sdk-go-v2docsconfiguring-sdkcustom-http" href="/aws-sdk-go-v2/docs/configuring-sdk/custom-http/">HTTP Client</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsconfiguring-sdklogging" href="/aws-sdk-go-v2/docs/configuring-sdk/logging/">Logging</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docshandling-errors" href="/aws-sdk-go-v2/docs/handling-errors/">Handling Errors</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/sdk-utilities/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SDK Utilities</a>
  </li>
  <ul>
    <li class="collapse " id="aws-sdk-go-v2docssdk-utilities">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssdk-utilitiescloudfront" href="/aws-sdk-go-v2/docs/sdk-utilities/cloudfront/">Amazon CloudFront</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssdk-utilitiesec2-imds" href="/aws-sdk-go-v2/docs/sdk-utilities/ec2-imds/">Amazon EC2 IMDS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssdk-utilitiess3" href="/aws-sdk-go-v2/docs/sdk-utilities/s3/">Amazon S3</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docsmaking-requests" href="/aws-sdk-go-v2/docs/making-requests/">Using AWS Services</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docscloud9-go" href="/aws-sdk-go-v2/docs/cloud9-go/">Using Cloud9 with the SDK</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/aws-sdk-go-v2/docs/security/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Security</a>
  </li>
  <ul>
    <li class="collapse " id="aws-sdk-go-v2docssecurity">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritycompliance-validation" href="/aws-sdk-go-v2/docs/security/compliance-validation/">Compliance Validation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecurityiam" href="/aws-sdk-go-v2/docs/security/iam/">Identity and Access Management</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecurityinfrastructure-security" href="/aws-sdk-go-v2/docs/security/infrastructure-security/">Infrastructure Security</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritydisaster-recovery-resiliency" href="/aws-sdk-go-v2/docs/security/disaster-recovery-resiliency/">Resilience</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritydata-protection" href="/aws-sdk-go-v2/docs/security/data-protection/">Data Protection</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-aws-sdk-go-v2docssecuritytls" href="/aws-sdk-go-v2/docs/security/tls/">Enforcing TLS 1.2</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











<a href="https://github.com/aws/aws-sdk-go-v2/edit/documentation/content/en/docs/configuring-sdk/custom-http.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/aws/aws-sdk-go-v2/new/documentation/content/en/docs/configuring-sdk/custom-http.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" target="_blank"><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/aws/aws-sdk-go-v2/issues/new?title=Customizing%20the%20HTTP%20Client" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/aws/aws-sdk-go-v2/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#overriding-during-configuration-loading">Overriding During Configuration Loading</a></li>
    <li><a href="#timeout">Timeout</a></li>
    <li><a href="#dialer">Dialer</a>
      <ul>
        <li><a href="#settings">Settings</a></li>
      </ul>
    </li>
    <li><a href="#transport">Transport</a>
      <ul>
        <li><a href="#configuring-a-proxy">Configuring a Proxy</a></li>
        <li><a href="#other-settings">Other Settings</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://aws.github.io/aws-sdk-go-v2/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/">Configuring the SDK</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/custom-http/">HTTP Client</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Customizing the HTTP Client</h1>
    <div class="lead">Create a custom HTTP client with the AWS SDK for Go V2 to specify custom timeout values.</div>
	       
	<p>The AWS SDK for Go V2 uses a default HTTP client with default configuration values. Although you can change some of
these configuration values, the default HTTP client and transport are not sufficiently configured for customers using
the AWS SDK for Go V2 in an environment with high throughput and low latency requirements. This section describes how
to configure a custom HTTP client, and use that client to create AWS SDK for Go V2 calls.</p>
<p>To assist you in creating a custom HTTP client, this section describes how to the
<a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/aws/transport/http#NewBuildableClient">NewBuildableClient</a> to configure custom settings, and use
that client with an AWS SDK for Go V2 service client.</p>
<p>Let&rsquo;s define what we want to customize.</p>
<h2 id="overriding-during-configuration-loading">Overriding During Configuration Loading</h2>
<p>Custom HTTP clients can be provided when calling <a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/config#LoadDefaultConfig">LoadDefaultConfig</a> by
wrapping the client using <a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/config#WithHTTP">WithHTTPClient</a> and passing the resulting value to
<code>LoadDefaultConfig</code>. For example to pass <code>customClient</code> as our client:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadDefaultConfig</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">WithHTTPClient</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">customClient</span><span style="color:#000;font-weight:bold">))</span>
</code></pre></div><h2 id="timeout">Timeout</h2>
<p>The <code>BuildableHTTPClient</code> can be configured with a request timeout limit. This timeout includes the time to connect,
process any redirects, and read the complete response body. For example to modify the client timeout:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;github.com/aws/aws-sdk-go-v2/aws/transport/http&#34;</span>

<span style="color:#8f5902;font-style:italic">// ...
</span><span style="color:#8f5902;font-style:italic"></span>
<span style="color:#000">httpClient</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NewBuildableClient</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">WithTimeout</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#0000cf;font-weight:bold">5</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="dialer">Dialer</h2>
<p>The <code>BuildableHTTPClient</code> provides a builder mechanics for constructing clients with modified
<a href="https://golang.org/pkg/net/#Dialer">Dialer</a> options. The following example shows how to configure a clients
<code>Dialer</code> settings.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">awshttp</span> <span style="color:#4e9a06">&#34;github.com/aws/aws-sdk-go-v2/aws/transport/http&#34;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;net&#34;</span>

<span style="color:#8f5902;font-style:italic">// ...
</span><span style="color:#8f5902;font-style:italic"></span>
<span style="color:#000">httpClient</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">awshttp</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NewBuildableClient</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">WithDialerOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">d</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">net</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Dialer</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">d</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">KeepAlive</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#0000cf;font-weight:bold">1</span>
	<span style="color:#000">d</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Timeout</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Millisecond</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#0000cf;font-weight:bold">500</span>
<span style="color:#000;font-weight:bold">})</span>
</code></pre></div><h3 id="settings">Settings</h3>
<h4 id="dialerkeepalive">Dialer.KeepAlive</h4>
<p>This setting represents the keep-alive period for an active network connection.</p>
<p>Set to a negative value to disable keep-alives.</p>
<p>Set to <strong>0</strong> to enable keep-alives if supported by the protocol and operating system.</p>
<p>Network protocols or operating systems that do not support keep-alives ignore this field. By default, TCP enables keep
alive.</p>
<p>See <a href="https://golang.org/pkg/net/#Dialer.KeepAlive">https://golang.org/pkg/net/#Dialer.KeepAlive</a></p>
<p>Set <code>KeepAlive</code> as <strong>time.Duration</strong>.</p>
<h4 id="dialertimeout">Dialer.Timeout</h4>
<p>This setting represents the maximum amount of time a dial waits for a connection to be created.</p>
<p>Default is 30 seconds.</p>
<p>See <a href="https://golang.org/pkg/net/#Dialer.Timeout">https://golang.org/pkg/net/#Dialer.Timeout</a></p>
<p>Set <code>Timeout</code> as <strong>time.Duration</strong>.</p>
<h2 id="transport">Transport</h2>
<p>The <code>BuildableHTTPClient</code> provides a builder mechanics for constructing clients with modified
<a href="https://golang.org/pkg/net/http#Transport">Transport</a> options.</p>
<h3 id="configuring-a-proxy">Configuring a Proxy</h3>
<p>If you cannot directly connect to the internet, you can use Go-supported
environment variables (<code>HTTP_PROXY</code> / <code>HTTPS_PROXY</code>) or create a custom HTTP client to
configure your proxy. The following example configures the client to use <code>PROXY_URL</code> as the proxy
endpoint:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">awshttp</span> <span style="color:#4e9a06">&#34;github.com/aws/aws-sdk-go-v2/aws/transport/http&#34;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;net/http&#34;</span>

<span style="color:#8f5902;font-style:italic">// ...
</span><span style="color:#8f5902;font-style:italic"></span>
<span style="color:#000">httpClient</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">awshttp</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NewBuildableClient</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">WithTransportOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tr</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Transport</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">proxyURL</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">url</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Parse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;PROXY_URL&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fatal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">err</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000">tr</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Proxy</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ProxyURL</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">proxyURL</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">})</span>
</code></pre></div><h3 id="other-settings">Other Settings</h3>
<p>Below are a few other <code>Transport</code> settings that can be modified to tune the HTTP client. Any additional settings not
described here can be found in the <a href="https://golang.org/pkg/net/http/#Transport">Transport</a> type documentation.
These settings can be applied as shown in the following example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">awshttp</span> <span style="color:#4e9a06">&#34;github.com/aws/aws-sdk-go-v2/aws/transport/http&#34;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;net/http&#34;</span>

<span style="color:#8f5902;font-style:italic">// ...
</span><span style="color:#8f5902;font-style:italic"></span>
<span style="color:#000">httpClient</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">awshttp</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NewBuildableClient</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">WithTransportOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tr</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Transport</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">tr</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ExpectContinueTimeout</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span>
	<span style="color:#000">tr</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">MaxIdleConns</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">10</span>
<span style="color:#000;font-weight:bold">})</span>
</code></pre></div><h4 id="transportexpectcontinuetimeout">Transport.ExpectContinueTimeout</h4>
<p>If the request has an &ldquo;Expect: 100-continue&rdquo; header, this setting represents the maximum amount of time to wait for a
server&rsquo;s first response headers after fully writing the request headers, This time does not include the time to send the
request header. The HTTP client sends its payload after this timeout is exhausted.</p>
<p>Default 1 second.</p>
<p>Set to <strong>0</strong> for no timeout and send request payload without waiting. One use case is when you run into issues with
proxies or third party services that take a session similar to the use of Amazon S3 in the function shown later.</p>
<p>See <a href="https://golang.org/pkg/net/http/#Transport.ExpectContinueTimeout">https://golang.org/pkg/net/http/#Transport.ExpectContinueTimeout</a></p>
<p>Set <code>ExpectContinue</code> as <strong>time.Duration</strong>.</p>
<h4 id="transportidleconntimeout">Transport.IdleConnTimeout</h4>
<p>This setting represents the maximum amount of time to keep an idle network connection alive between HTTP requests.</p>
<p>Set to <strong>0</strong> for no limit.</p>
<p>See <a href="https://golang.org/pkg/net/http/#Transport.IdleConnTimeout">https://golang.org/pkg/net/http/#Transport.IdleConnTimeout</a></p>
<p>Set <code>IdleConnTimeout</code> as <strong>time.Duration</strong>.</p>
<h4 id="transportmaxidleconns">Transport.MaxIdleConns</h4>
<p>This setting represents the maximum number of idle (keep-alive) connections across all hosts. One use case for
increasing this value is when you are seeing many connections in a short period from the same clients</p>
<p><strong>0</strong> means no limit.</p>
<p>See <a href="https://golang.org/pkg/net/http/#Transport.MaxIdleConns">https://golang.org/pkg/net/http/#Transport.MaxIdleConns</a></p>
<p>Set<code>MaxIdleConns</code> as <strong>int</strong>.</p>
<h4 id="transportmaxidleconnsperhost">Transport.MaxIdleConnsPerHost</h4>
<p>This setting represents the maximum number of idle (keep-alive) connections to keep per-host. One use case for
increasing this value is when you are seeing many connections in a short period from the same clients</p>
<p>Default is two idle connections per host.</p>
<p>Set to <strong>0</strong> to use DefaultMaxIdleConnsPerHost (2).</p>
<p>See <a href="https://golang.org/pkg/net/http/#Transport.MaxIdleConnsPerHost">https://golang.org/pkg/net/http/#Transport.MaxIdleConnsPerHost</a></p>
<p>Set <code>MaxIdleConnsPerHost</code> as <strong>int</strong>.</p>
<h4 id="transportresponseheadertimeout">Transport.ResponseHeaderTimeout</h4>
<p>This setting represents the maximum amount of time to wait for a client to read the response header.</p>
<p>If the client isn&rsquo;t able to read the response&rsquo;s header within this duration, the request fails with a timeout error.</p>
<p>Be careful setting this value when using long-running Lambda functions, as the operation does not return any response
headers until the Lambda function has finished or timed out. However, you can still use this option with the **
InvokeAsync** API operation.</p>
<p>Default is no timeout; wait forever.</p>
<p>See <a href="https://golang.org/pkg/net/http/#Transport.ResponseHeaderTimeout">https://golang.org/pkg/net/http/#Transport.ResponseHeaderTimeout</a></p>
<p>Set <code>ResponseHeaderTimeout</code> as <strong>time.Duration</strong>.</p>
<h4 id="transporttlshandshaketimeout">Transport.TLSHandshakeTimeout</h4>
<p>This setting represents the maximum amount of time waiting for a TLS handshake to be completed.</p>
<p>Default is 10 seconds.</p>
<p>Zero means no timeout.</p>
<p>See <a href="https://golang.org/pkg/net/http/#Transport.TLSHandshakeTimeout">https://golang.org/pkg/net/http/#Transport.TLSHandshakeTimeout</a></p>
<p>Set <code>TLSHandshakeTimeout</code> as <strong>time.Duration</strong>.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified November 24, 2020: <a  href="https://github.com/aws/aws-sdk-go-v2/commit/653d2e220003e1a68dd2b8512fb12b5f7a9e447e">Developer: Guide Using AWS Services (#907) (653d2e2)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Blog" aria-label="Blog">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/blogs/developer/category/developer-tools/aws-sdk-for-go/">
      <i class="fa fa-rss"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/aws/aws-sdk-go-v2">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 Amazon Web Services, Inc. or its affiliates. All rights reserved. All Rights Reserved</small>
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/aws-sdk-go-v2/js/main.min.460c8ae21829f9b330823a08f34ac961d7d0daa8874c8c9eba7ea0484bb42a79.js" integrity="sha256-RgyK4hgp&#43;bMwgjoI80rJYdfQ2qiHTIyeun6gSEu0Knk=" crossorigin="anonymous"></script>




  </body>
</html>